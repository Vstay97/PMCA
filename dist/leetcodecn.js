(()=>{"use strict";var e,t,o,n,s={724:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(147),s=o(347);const a=async e=>new Promise(((t,o)=>{chrome.storage.sync.get(e,(e=>{void 0===e?o(key):t(e)}))})).catch((e=>{console.log(console.log(e))})),r=async(e,t)=>{if(o=t,Object.getPrototypeOf(o)!==Object.prototype)throw"shardedSet only supports JSON type val";var o;const s={},a=Object.keys(t);Array.prototype.forEach.call(a,(o=>{const a=(e=>((0,n.G$)(e)%20+20)%20)(o),r=`${e}#${a}`;r in s||(s[r]={}),s[r][o]=t[o]})),console.log("set shareded data to cloud:"),console.log(s),await(async e=>new Promise((t=>{chrome.storage.sync.set(e),t()})).catch((e=>console.log(e))))(s)},i=async e=>{const t=[];for(let o=0;o<20;o++)t.push(`${e}#${o}`);const o=await a(t),n={};if(void 0===o)return n;for(const e in o)Object.assign(n,o[e]);return console.log(`get ${e} sharded from cloud`),console.log(n),n};class c extends s.T{constructor(){super(),this.get=i,this.set=r}}const l=new c},610:(e,t,o)=>{o.d(t,{Ay:()=>i,lR:()=>a,vc:()=>s});var n=o(347);const s=async e=>new Promise(((t,o)=>{chrome.storage.local.get(e,(n=>{void 0===n||void 0===n[e]?o(e):t(n[e])}))})).catch((e=>{console.log(`get local storage data failed for key = ${e}`)})),a=async(e,t)=>new Promise((o=>{chrome.storage.local.set({[e]:t}),o()})).catch((e=>console.log(e)));class r extends n.T{constructor(){super(),this.get=s,this.set=a}}const i=new r},347:(e,t,o)=>{o.d(t,{T:()=>n});class n{constructor(){this.get=async e=>null,this.set=async(e,t)=>{}}}},223:(e,t,o)=>{o.a(e,(async(e,t)=>{try{var n=o(908),s=o(728);console.log("Hello PMCA!"),await(0,n.A9)(),document.addEventListener("click",s.t),t()}catch(e){t(e)}}),1)},728:(e,t,o)=>{o.d(t,{t:()=>f});var n=o(147);const s={operationName:"questionTitle",variables:{titleSlug:""}},a={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.122 Safari/537.36",Connection:"keep-alive","Content-Type":"application/json",Referer:""};var r=o(610);Object.freeze({MASTER:"mark as mastered",RESET:"reset progress",DELETE:"delete record",DOWNGRADE:"downgrade proficiency"});var i=o(984);const c=async()=>{let e=await(0,r.vc)(i.Qi);return console.log(`current cnMode is ${e}`),void 0===e&&(await(0,r.lR)(i.Qi,!1),e=!1),e};var l=o(776);o(724);const d=async()=>{const e=await c()?i.o9:i.So;let t=await(0,r.vc)(e);return void 0===t&&(t={}),t},m=async e=>{e.modificationTime=Date.now();const t=await d();t[e.index]=e,await(async e=>{const t=await c()?i.o9:i.So;await(0,r.lR)(t,e)})(t)},u=async()=>{if(!l.M.isCloudSyncEnabled)return;const e=await c()?i.o9:i.So;await(0,n.mG)(e,n.nC)};class y{constructor(e,t,o,n,s,a,r){this.index=e,this.name=t,this.level=o,this.url=n,this.submissionTime=s,this.proficiency=a,this.modificationTime=r,this.isDeleted=!1}}const p=()=>{let e,t=10;const o=setInterval((async()=>{if(t<=0)return void clearInterval(o);if(e=(0,n.OL)(),void 0===e||0===e.length)return void t--;if(clearInterval(o),!(0,n.W2)(e))return;const{problemIndex:r,problemName:i,problemLevel:c,problemUrl:l}=await(async()=>await(async()=>{let e=window.location.href;const t=e.match(/(com|cn)(\/|$)/);console.log(`current site is ${t[1]}`);const o=t?t[1]:"com",n=["/submissions/","/description/","/discussion/","/solutions/"];for(const t of n)if(e.includes(t)){e=e.substring(0,e.lastIndexOf(t)+1);break}const r=e.split("/").splice(-2)[0],i=await(async(e,t)=>{const o=`https://leetcode.${t}`;s.variables.titleSlug=e,s.query=`query questionTitle($titleSlug: String!) {\n        question(titleSlug: $titleSlug) {\n          questionFrontendId\n          ${"cn"===t?"translatedTitle":"title"}\n          difficulty\n        }\n      }`,a.Referer=`${o}/problems/${e}`;const n={method:"POST",headers:a,body:JSON.stringify(s),timeout:1e4},r=await fetch(`${o}/graphql`,n);return(await r.json()).data.question})(r,o);return{problemIndex:i.questionFrontendId,problemName:`${i.questionFrontendId}. ${"cn"===o?i.translatedTitle:i.title}`,problemLevel:i.difficulty,problemUrl:e}})())();await u();let p=(await d())[r];p&&!0!==p.isDeleted?(0,n.Dv)(p)&&await m((0,n.er)(p)):(p=new y(r,i,c,l,Date.now(),(0,n.Mv)(c)[0],Date.now()),await m(p)),await u(),console.log("Submission successfully tracked!")}),1e3)},f=e=>{const t=e.target;[(0,n.tO)(t),t.parentElement&&(0,n.tO)(t.parentElement),t.parentElement&&t.parentElement.parentElement&&(0,n.tO)(t.parentElement.parentElement)].reduce(((e,t)=>e||t))&&p()}},908:(e,t,o)=>{o.d(t,{A9:()=>i});var n=o(610),s=o(776),a=o(984),r=o(920);const i=async()=>{await(async()=>{const e=await(async()=>await(0,n.vc)(a.rQ))();void 0!==e&&Object.assign(s.M,e)})(),await(async()=>{const e=await(async()=>await(0,n.vc)(a.fO))()|(0,r.TH)(r.qs.sortByReviewTimeAsc);s.M.problemSortBy=(0,r.mq)(e)})(),await(async()=>{s.M.isCloudSyncEnabled=await(async()=>{const e=await(0,n.vc)(a.v4),t=void 0!==e&&e[a.g5];return void 0===t&&(t=!1),t})()})()}},776:(e,t,o)=>{o.d(t,{M:()=>n});const n={needReviewProblems:null,reviewScheduledProblems:null,completedProblems:null,toReviewPage:1,scheduledPage:1,completedPage:1,toReviewMaxPage:null,scheduledMaxPage:null,completedMaxPage:null,tooltipTriggerList:null,tooltipList:null,easyIntv:[1,3],mediumIntv:[1,3,4],hardIntv:[0,1,2,3,4],problemSortBy:o(920).qs.sortByReviewTimeAsc,isCloudSyncEnabled:!1}},803:(e,t,o)=>{o.d(t,{BX:()=>i,Hx:()=>s,Mz:()=>p,Xy:()=>a,c4:()=>n,dy:()=>m,fu:()=>c,lw:()=>d,o3:()=>r,pS:()=>u,uK:()=>l,uM:()=>y});const n=[1440,2880,5760,10080,21600],s="data-e2e-locator",a="console-submit-button",r="text-green-s dark:text-dark-green-s flex flex-1 items-center gap-2 text-[16px] font-medium leading-6",i="whitespace-nowrap text-xl font-medium text-red-s dark:text-dark-red-s",c="mr-1 flex-1 whitespace-nowrap text-xl font-medium text-red-s dark:text-dark-red-s",l="success__3Ai7",d="error__2Ft1",m="error__10k9",u="text-green-s dark:text-dark-green-s flex flex-1 items-center gap-2 text-[16px] font-medium leading-6",y="whitespace-nowrap text-xl font-medium text-red-s dark:text-dark-red-s",p="mr-1 flex-1 whitespace-nowrap text-xl font-medium text-red-s dark:text-dark-red-s"},984:(e,t,o)=>{o.d(t,{Qi:()=>n,So:()=>a,fO:()=>i,g5:()=>l,o9:()=>s,rQ:()=>r,v4:()=>c});const n="cn_mode",s="cn_records",a="records",r="review_intervals",i="problem_sort_by",c="configs",l="enable_cloud"},920:(e,t,o)=>{o.d(t,{TH:()=>l,mq:()=>d,qs:()=>i});var n=o(147);const s=e=>(t,o)=>-e(t,o),a=(e,t)=>(0,n.pH)(e).valueOf()-(0,n.pH)(t).valueOf(),r=(e,t)=>(0,n.y$)(t).valueOf()-(0,n.y$)(e).valueOf(),i={sortByReviewTimeDesc:s(a),sortByReviewTimeAsc:a,sortByDelayHoursDesc:r,sortByDelayHoursAsc:s(r)},c=[i.sortByReviewTimeAsc,i.sortByReviewTimeDesc,i.sortByDelayHoursAsc,i.sortByDelayHoursDesc],l=e=>c.indexOf(e),d=e=>c[e]},147:(e,t,o)=>{o.d(t,{Dv:()=>i,G$:()=>v,Mv:()=>d,OL:()=>u,W2:()=>y,er:()=>p,mG:()=>w,nC:()=>f,pH:()=>c,tO:()=>m,y$:()=>l});var n=o(610),s=o(724),a=o(776),r=o(803);const i=e=>!(e.proficiency>=r.c4.length)&&(Date.now()-e.submissionTime)/6e4>=r.c4[e.proficiency],c=e=>new Date(e.submissionTime+60*r.c4[e.proficiency]*1e3),l=e=>{const t=c(e);return Math.round((Date.now()-t)/36e5)},d=e=>"Easy"===e?a.M.easyIntv:"Medium"===e?a.M.mediumIntv:a.M.hardIntv,m=e=>e.getAttribute(r.Hx)===r.Xy,u=()=>document.getElementsByClassName(r.o3)[0]||document.getElementsByClassName(r.BX)[0]||document.getElementsByClassName(r.fu)[0]||document.getElementsByClassName(r.uK)[0]||document.getElementsByClassName(r.lw)[0]||document.getElementsByClassName(r.dy)[0]||document.getElementsByClassName(r.pS)[0]||document.getElementsByClassName(r.uM)[0]||document.getElementsByClassName(r.Mz)[0],y=e=>e.className.includes(r.o3)||e.className.includes(r.pS)||e.className.includes(r.uK),p=e=>{const t=d(e.problemLevel);let o;for(const n of t)if(n>e.proficiency){o=n;break}return e.proficiency=void 0!==o?o:r.c4.length,e.submissionTime=Date.now(),e.modificationTime=Date.now(),e},f=(e,t)=>{const o=new Set([...Object.keys(e),...Object.keys(t)]),n={};return o.forEach((o=>{const s=(a=e[o],null==(r=t[o])?a:null==a?r:void 0===r.modificationTime||null===r.modificationTime?a:void 0===a.modificationTime||null===a.modificationTime?r:a.modificationTime>r.modificationTime?a:r);var a,r;n[o]=s})),n},w=async(e,t)=>{await(async(e,t,o,n)=>{if(!a.M.isCloudSyncEnabled)return;const s=await e.get(o)||{},r=await t.get(o)||{},i=n(s,r);console.log("merging data from local and from cloud. local:"),console.log(s),console.log("merging data from local and from cloud. cloud:"),console.log(r),await e.set(o,i),await t.set(o,i)})(n.Ay,s.A,e,t)},v=e=>{let t=0;for(let o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t|=0;return t}}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var o=a[e]={exports:{}};return s[e](o,o.exports,r),o.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},r.a=(s,a,r)=>{var i;r&&((i=[]).d=-1);var c,l,d,m=new Set,u=s.exports,y=new Promise(((e,t)=>{d=t,l=e}));y[t]=u,y[e]=e=>(i&&e(i),m.forEach(e),y.catch((e=>{}))),s.exports=y,a((s=>{var a;c=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[e])return s;if(s.then){var a=[];a.d=0,s.then((e=>{r[t]=e,n(a)}),(e=>{r[o]=e,n(a)}));var r={};return r[e]=e=>e(a),r}}var i={};return i[e]=e=>{},i[t]=s,i})))(s);var r=()=>c.map((e=>{if(e[o])throw e[o];return e[t]})),l=new Promise((t=>{(a=()=>t(r)).r=0;var o=e=>e!==i&&!m.has(e)&&(m.add(e),e&&!e.d&&(a.r++,e.push(a)));c.map((t=>t[e](o)))}));return a.r?l:r()}),(e=>(e?d(y[o]=e):l(u),n(i)))),i&&i.d<0&&(i.d=0)},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(223)})();